<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Xml-Parser</title>
    <style>
        .cellStyle
        {
            background-color: gray;
        }
    </style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
</head>
<body>
<table cellspacing="5px" id="test_tbl" width="1000px">
    <tr>
        <th class="cellStyle">ID</th>
        <th class="cellStyle">Name</th>
        <th class="cellStyle">Description</th>
        <th class="cellStyle">Type</th>
        <th class="cellStyle">Value</th>
    </tr>
    <tr>
        <td class="cellStyle">1</td>
        <td class="cellStyle">test</td>
        <td class="cellStyle">test</td>
        <td class="cellStyle">test</td>
        <td class="cellStyle">test</td>
        <td class="cellStyle"><button class="edit" value="1">edit</button> <button class="del" value="1">del</button></td>
    </tr>
    <tr>
        <td class="cellStyle">1</td>
        <td class="cellStyle">test</td>
        <td class="cellStyle">test</td>
        <td class="cellStyle">test</td>
        <td class="cellStyle">test</td>
        <td class="cellStyle"><button class="edit" value="2">edit</button> <button class="del" value="2">del</button></td>
    </tr>
</table>
<script>
    alert($('button.edit:last').attr("value"));
</script>
<div id="edit_div" class="pad3 bg bord abs dis" style="display:none">
    <input type="text" size="20%">
    <input type="text" size="20%">
    <input type="text" size="20%">
    <input type="text" size="20%">
    <input type="text" size="20%">
    <input type="button" value="Сохранить" id="save_but">
    <input type="button" value="Отменить" id="cancel_but">
</div>
<p>Тестовый текст для проверки анимации</p>
<button id="add" style="">Add</button>
<div id="add_div" class="pad3 bg bord abs dis" style="display:none">
    <input type="text" size="20%">
    <input type="text" size="20%">
    <input type="text" size="20%">
    <input type="text" size="20%">
    <input type="text" size="20%">
    <input type="button" value="Сохранить" id="add_but">
    <input type="button" value="Отменить" id="cancel_add_but">
</div>
<script type="text/javascript">
    var tr;
    function edit_appearence(){
        $('#edit_div').slideToggle(200);

    }
    function add_appearence(){
        $('#add_div').slideToggle(200);

    }
    $('button.edit[value=this.attr("value")]','#test_tbl','#test_tbl').click(function (){

        tr = $(this).parent().parent();

        for(var i=0; i<5; i++)

        $('input:eq('+i+')','#edit_div').val($('td:eq('+i+')',tr).text());

        edit_appearence();

    });

    $('button.del[value=this.attr("value")]','#test_tbl').click(function (){


        if(!confirm("Delete?")) return;
        $(this).parent().parent().remove();

    });

    $('#save_but','#edit_div').click(function (){

        for(var i=0; i<5; i++)

        $('td:eq('+i+')',tr).text($('input:eq('+i+')','#edit_div').val());

        edit_appearence();

    });

    $('#cancel_but','#edit_div').click(edit_appearence);
    $('#add').click(function() {
        $('#add').slideToggle(200);
        add_appearence();
        }
    );
    $('#cancel_add_but','#add_div').click(function(){
        add_appearence();
        $('#add').slideToggle(200);
    })
    $('#add_but','#add_div').click(function(){
        $('#add').slideToggle(200);
        add_appearence();
        var tr='<tr>';
        for (var i=0;i<5;i++)
            tr=tr+ '<td class="cellStyle">'+$('input:eq('+i+')','#add_div').val()+'</td>';
        var buttonValue=parseInt($('button.edit:last').attr("value"))+1;
        tr=tr+'<td class="cellStyle"><button class="edit" value="'
                +buttonValue +'">edit</button> <button class="del" value="'
                +buttonValue +'">del</button></td>'+'</tr>';
        $('tr:last').after(tr);

    })

</script>
}
</body>
</html>